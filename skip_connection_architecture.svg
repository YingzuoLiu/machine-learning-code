<svg viewBox="0 0 1400 900" xmlns="http://www.w3.org/2000/svg">
  <!-- 背景 -->
  <rect width="1400" height="900" fill="#f8fafc"/>
  
  <!-- 标题 -->
  <text x="700" y="30" text-anchor="middle" class="title" font-size="24" font-weight="bold" fill="#1e293b">跳跃连接 (Skip Connection) 架构详解</text>
  
  <!-- 第一部分：基本概念对比 -->
  <g id="comparison-section">
    <text x="350" y="70" text-anchor="middle" font-size="18" font-weight="bold" fill="#dc2626">传统网络 (信息丢失)</text>
    <text x="1050" y="70" text-anchor="middle" font-size="18" font-weight="bold" fill="#16a34a">带跳跃连接 (信息保留)</text>
    
    <!-- 传统网络 -->
    <g id="traditional-network">
      <!-- 输入层 -->
      <rect x="200" y="90" width="80" height="40" fill="#ddd6fe" stroke="#7c3aed" stroke-width="2" rx="8"/>
      <text x="240" y="115" text-anchor="middle" font-size="12" fill="#5b21b6">输入特征</text>
      
      <!-- 中间层1 -->
      <rect x="200" y="160" width="80" height="40" fill="#fed7d7" stroke="#dc2626" stroke-width="2" rx="8"/>
      <text x="240" y="185" text-anchor="middle" font-size="12" fill="#dc2626">层1</text>
      
      <!-- 中间层2 -->
      <rect x="200" y="230" width="80" height="40" fill="#fed7d7" stroke="#dc2626" stroke-width="2" rx="8"/>
      <text x="240" y="255" text-anchor="middle" font-size="12" fill="#dc2626">层2</text>
      
      <!-- 中间层3 -->
      <rect x="200" y="300" width="80" height="40" fill="#fed7d7" stroke="#dc2626" stroke-width="2" rx="8"/>
      <text x="240" y="325" text-anchor="middle" font-size="12" fill="#dc2626">层3</text>
      
      <!-- 输出层 -->
      <rect x="200" y="370" width="80" height="40" fill="#fef3c7" stroke="#d97706" stroke-width="2" rx="8"/>
      <text x="240" y="395" text-anchor="middle" font-size="12" fill="#d97706">输出</text>
      
      <!-- 连接线 -->
      <path d="M240 130 L240 160" stroke="#374151" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
      <path d="M240 200 L240 230" stroke="#374151" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
      <path d="M240 270 L240 300" stroke="#374151" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
      <path d="M240 340 L240 370" stroke="#374151" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
      
      <!-- 信息流失警告 -->
      <text x="320" y="250" font-size="11" fill="#dc2626">❌ 信息逐层丢失</text>
      <text x="320" y="265" font-size="11" fill="#dc2626">❌ 梯度消失问题</text>
      <text x="320" y="280" font-size="11" fill="#dc2626">❌ 细节特征丢失</text>
    </g>
    
    <!-- 跳跃连接网络 -->
    <g id="skip-connection-network">
      <!-- 输入层 -->
      <rect x="900" y="90" width="80" height="40" fill="#ddd6fe" stroke="#7c3aed" stroke-width="2" rx="8"/>
      <text x="940" y="115" text-anchor="middle" font-size="12" fill="#5b21b6">输入特征</text>
      
      <!-- 中间层1 -->
      <rect x="900" y="160" width="80" height="40" fill="#dcfce7" stroke="#16a34a" stroke-width="2" rx="8"/>
      <text x="940" y="185" text-anchor="middle" font-size="12" fill="#16a34a">层1</text>
      
      <!-- 中间层2 -->
      <rect x="900" y="230" width="80" height="40" fill="#dcfce7" stroke="#16a34a" stroke-width="2" rx="8"/>
      <text x="940" y="255" text-anchor="middle" font-size="12" fill="#16a34a">层2</text>
      
      <!-- 中间层3 -->
      <rect x="900" y="300" width="80" height="40" fill="#dcfce7" stroke="#16a34a" stroke-width="2" rx="8"/>
      <text x="940" y="325" text-anchor="middle" font-size="12" fill="#16a34a">层3</text>
      
      <!-- 输出层 -->
      <rect x="900" y="370" width="80" height="40" fill="#fef3c7" stroke="#d97706" stroke-width="2" rx="8"/>
      <text x="940" y="395" text-anchor="middle" font-size="12" fill="#d97706">输出</text>
      
      <!-- 正常连接线 -->
      <path d="M940 130 L940 160" stroke="#374151" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
      <path d="M940 200 L940 230" stroke="#374151" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
      <path d="M940 270 L940 300" stroke="#374151" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
      <path d="M940 340 L940 370" stroke="#374151" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
      
      <!-- 跳跃连接 -->
      <path d="M990 110 Q1040 110 1040 180 Q1040 250 1040 320 Q1040 390 990 390" stroke="#22c55e" stroke-width="3" fill="none" stroke-dasharray="8,4" marker-end="url(#greenarrowhead)"/>
      <path d="M990 180 Q1020 180 1020 250 Q1020 320 990 320" stroke="#22c55e" stroke-width="3" fill="none" stroke-dasharray="8,4" marker-end="url(#greenarrowhead)"/>
      <path d="M990 250 Q1010 250 1010 320 Q1010 390 990 390" stroke="#22c55e" stroke-width="3" fill="none" stroke-dasharray="8,4" marker-end="url(#greenarrowhead)"/>
      
      <!-- 跳跃连接标签 -->
      <text x="1060" y="180" font-size="11" fill="#16a34a" font-weight="bold">Skip</text>
      <text x="1040" y="250" font-size="11" fill="#16a34a" font-weight="bold">Skip</text>
      <text x="1070" y="320" font-size="11" fill="#16a34a" font-weight="bold">Skip</text>
      
      <!-- 优点说明 -->
      <text x="1020" y="250" font-size="11" fill="#16a34a">✅ 信息直接传递</text>
      <text x="1020" y="265" font-size="11" fill="#16a34a">✅ 梯度流畅通</text>
      <text x="1020" y="280" font-size="11" fill="#16a34a">✅ 细节特征保留</text>
    </g>
  </g>
  
  <!-- 第二部分：U-Net中的跳跃连接详解 -->
  <g id="unet-skip-details">
    <text x="700" y="480" text-anchor="middle" font-size="18" font-weight="bold" fill="#475569">U-Net 中的跳跃连接机制</text>
    
    <!-- U-Net架构 -->
    <g id="unet-architecture">
      <!-- 编码器路径 -->
      <g id="encoder-path">
        <!-- 输入 -->
        <rect x="100" y="520" width="80" height="60" fill="#ddd6fe" stroke="#7c3aed" stroke-width="2" rx="8"/>
        <text x="140" y="545" text-anchor="middle" font-size="11" fill="#5b21b6">输入</text>
        <text x="140" y="560" text-anchor="middle" font-size="9" fill="#5b21b6">256×256</text>
        
        <!-- 编码层1 -->
        <rect x="220" y="540" width="80" height="60" fill="#fed7d7" stroke="#dc2626" stroke-width="2" rx="8"/>
        <text x="260" y="565" text-anchor="middle" font-size="11" fill="#dc2626">Conv+Pool</text>
        <text x="260" y="580" text-anchor="middle" font-size="9" fill="#dc2626">128×128</text>
        
        <!-- 编码层2 -->
        <rect x="340" y="560" width="80" height="60" fill="#fed7d7" stroke="#dc2626" stroke-width="2" rx="8"/>
        <text x="380" y="585" text-anchor="middle" font-size="11" fill="#dc2626">Conv+Pool</text>
        <text x="380" y="600" text-anchor="middle" font-size="9" fill="#dc2626">64×64</text>
        
        <!-- 瓶颈层 -->
        <rect x="460" y="580" width="80" height="60" fill="#fef3c7" stroke="#d97706" stroke-width="2" rx="8"/>
        <text x="500" y="605" text-anchor="middle" font-size="11" fill="#d97706">Bottleneck</text>
        <text x="500" y="620" text-anchor="middle" font-size="9" fill="#d97706">32×32</text>
      </g>
      
      <!-- 解码器路径 -->
      <g id="decoder-path">
        <!-- 解码层1 -->
        <rect x="580" y="560" width="80" height="60" fill="#dcfce7" stroke="#16a34a" stroke-width="2" rx="8"/>
        <text x="620" y="585" text-anchor="middle" font-size="11" fill="#16a34a">Upsample</text>
        <text x="620" y="600" text-anchor="middle" font-size="9" fill="#16a34a">64×64</text>
        
        <!-- 解码层2 -->
        <rect x="700" y="540" width="80" height="60" fill="#dcfce7" stroke="#16a34a" stroke-width="2" rx="8"/>
        <text x="740" y="565" text-anchor="middle" font-size="11" fill="#16a34a">Upsample</text>
        <text x="740" y="580" text-anchor="middle" font-size="9" fill="#16a34a">128×128</text>
        
        <!-- 输出 -->
        <rect x="820" y="520" width="80" height="60" fill="#e0e7ff" stroke="#3b82f6" stroke-width="2" rx="8"/>
        <text x="860" y="545" text-anchor="middle" font-size="11" fill="#3b82f6">输出</text>
        <text x="860" y="560" text-anchor="middle" font-size="9" fill="#3b82f6">256×256</text>
      </g>
      
      <!-- 主要数据流 -->
      <path d="M180 550 L220 570" stroke="#374151" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
      <path d="M300 570 L340 590" stroke="#374151" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
      <path d="M420 590 L460 610" stroke="#374151" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
      <path d="M540 610 L580 590" stroke="#374151" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
      <path d="M660 590 L700 570" stroke="#374151" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
      <path d="M780 570 L820 550" stroke="#374151" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
      
      <!-- 跳跃连接 -->
      <path d="M300 555 Q400 500 Q500 500 Q600 500 Q660 555" stroke="#22c55e" stroke-width="4" fill="none" stroke-dasharray="10,5" marker-end="url(#greenarrowhead)"/>
      <path d="M420 575 Q500 520 Q580 575" stroke="#22c55e" stroke-width="4" fill="none" stroke-dasharray="10,5" marker-end="url(#greenarrowhead)"/>
      
      <!-- 连接标签 -->
      <text x="450" y="495" text-anchor="middle" font-size="12" fill="#16a34a" font-weight="bold">Skip Connection</text>
      <text x="500" y="515" text-anchor="middle" font-size="12" fill="#16a34a" font-weight="bold">Skip Connection</text>
      
      <!-- 连接操作符号 -->
      <circle cx="650" cy="570" r="15" fill="#fef3c7" stroke="#f59e0b" stroke-width="2"/>
      <text x="650" y="576" text-anchor="middle" font-size="16" fill="#f59e0b" font-weight="bold">+</text>
      
      <circle cx="770" cy="555" r="15" fill="#fef3c7" stroke="#f59e0b" stroke-width="2"/>
      <text x="770" y="561" text-anchor="middle" font-size="16" fill="#f59e0b" font-weight="bold">+</text>
    </g>
  </g>
  
  <!-- 第三部分：数学原理 -->
  <g id="mathematical-principle">
    <text x="150" y="700" font-size="16" font-weight="bold" fill="#475569">数学原理：</text>
    
    <!-- 传统网络公式 -->
    <text x="150" y="730" font-size="14" fill="#dc2626">传统网络: y = F(F(F(x)))</text>
    <text x="400" y="730" font-size="12" fill="#64748b">→ 信息在多层传递中丢失</text>
    
    <!-- 跳跃连接公式 -->
    <text x="150" y="760" font-size="14" fill="#16a34a">跳跃连接: y = F(x) + x</text>
    <text x="320" y="760" font-size="12" fill="#64748b">→ 原始信息直接保留</text>
    
    <!-- ResNet公式 -->
    <text x="150" y="790" font-size="14" fill="#3b82f6">ResNet块: H(x) = F(x) + x</text>
    <text x="350" y="790" font-size="12" fill="#64748b">→ 学习残差映射</text>
  </g>
  
  <!-- 第四部分：优势总结 -->
  <g id="advantages">
    <text x="700" y="700" font-size="16" font-weight="bold" fill="#475569">跳跃连接的核心优势：</text>
    
    <g id="advantage-list">
      <circle cx="720" cy="725" r="4" fill="#16a34a"/>
      <text x="735" y="730" font-size="13" fill="#374151">解决梯度消失问题：直接路径让梯度可以流回早期层</text>
      
      <circle cx="720" cy="745" r="4" fill="#16a34a"/>
      <text x="735" y="750" font-size="13" fill="#374151">保留细节特征：低层的精细特征直接传递给高层</text>
      
      <circle cx="720" cy="765" r="4" fill="#16a34a"/>
      <text x="735" y="770" font-size="13" fill="#374151">加速训练收敛：提供更短的优化路径</text>
      
      <circle cx="720" cy="785" r="4" fill="#16a34a"/>
      <text x="735" y="790" font-size="13" fill="#374151">增强表示能力：结合多尺度特征信息</text>
      
      <circle cx="720" cy="805" r="4" fill="#16a34a"/>
      <text x="735" y="810" font-size="13" fill="#374151">提高网络稳定性：即使某些层失效，信息仍能传递</text>
    </g>
  </g>
  
  <!-- 实际应用示例 -->
  <g id="applications">
    <text x="150" y="840" font-size="14" font-weight="bold" fill="#7c3aed">典型应用:</text>
    <text x="250" y="840" font-size="12" fill="#64748b">ResNet (图像分类)</text>
    <text x="380" y="840" font-size="12" fill="#64748b">U-Net (图像分割)</text>
    <text x="500" y="840" font-size="12" fill="#64748b">DenseNet (密集连接)</text>
    <text x="620" y="840" font-size="12" fill="#64748b">Transformer (残差连接)</text>
  </g>
  
  <!-- 箭头标记定义 -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#374151"/>
    </marker>
    <marker id="greenarrowhead" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#22c55e"/>
    </marker>
  </defs>
  
  <!-- 样式定义 -->
  <style>
    .title { font-family: Arial, sans-serif; }
    text { font-family: Arial, sans-serif; }
  </style>
</svg>