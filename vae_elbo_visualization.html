<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VAE ELBO å¯è§†åŒ–è§£é‡Š</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: white;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }
        
        h1 {
            text-align: center;
            font-size: 2.5em;
            margin-bottom: 30px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        .section {
            margin: 30px 0;
            padding: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            border: 2px solid rgba(255, 255, 255, 0.2);
        }
        
        .vae-diagram {
            display: flex;
            justify-content: space-around;
            align-items: center;
            margin: 30px 0;
            flex-wrap: wrap;
            gap: 20px;
        }
        
        .component {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            min-width: 150px;
            position: relative;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .component:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
        }
        
        .encoder {
            background: linear-gradient(45deg, #ff6b6b, #ee5a24);
        }
        
        .latent {
            background: linear-gradient(45deg, #4834d4, #686de0);
        }
        
        .decoder {
            background: linear-gradient(45deg, #00d2d3, #54a0ff);
        }
        
        .arrow {
            font-size: 2em;
            color: #fff;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }
        
        .formula {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            font-size: 1.2em;
            text-align: center;
            border-left: 4px solid #ffd700;
        }
        
        .explanation {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
            margin: 10px 0;
            border-left: 4px solid #32ff7e;
        }
        
        .loss-visualization {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }
        
        .loss-term {
            background: rgba(255, 255, 255, 0.15);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            transition: transform 0.3s ease;
        }
        
        .loss-term:hover {
            transform: scale(1.05);
        }
        
        .reconstruction {
            border: 3px solid #ff6b6b;
        }
        
        .kl-reg {
            border: 3px solid #4834d4;
        }
        
        .interactive-demo {
            margin: 30px 0;
            text-align: center;
        }
        
        .slider-container {
            margin: 20px 0;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }
        
        .slider {
            width: 200px;
            height: 8px;
            border-radius: 5px;
            background: rgba(255, 255, 255, 0.3);
            outline: none;
            cursor: pointer;
        }
        
        .slider::-webkit-slider-thumb {
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #ffd700;
            cursor: pointer;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
        }
        
        .balance-display {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 20px 0;
            padding: 20px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 15px;
        }
        
        .balance-bar {
            flex: 1;
            height: 30px;
            border-radius: 15px;
            margin: 0 10px;
            position: relative;
            overflow: hidden;
            background: rgba(255, 255, 255, 0.1);
        }
        
        .balance-fill {
            height: 100%;
            border-radius: 15px;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
        }
        
        .highlight {
            background: linear-gradient(45deg, #ffd700, #ffb347);
            animation: glow 2s ease-in-out infinite alternate;
        }
        
        @keyframes glow {
            from {
                box-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
            }
            to {
                box-shadow: 0 0 20px rgba(255, 215, 0, 0.8);
            }
        }
        
        @media (max-width: 768px) {
            .vae-diagram {
                flex-direction: column;
            }
            
            .loss-visualization {
                grid-template-columns: 1fr;
            }
            
            .balance-display {
                flex-direction: column;
                gap: 15px;
            }
            
            .balance-bar {
                width: 100%;
                margin: 0;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ¯ VAE çš„ ELBO ç›®æ ‡å‡½æ•°å¯è§†åŒ–è§£é‡Š</h1>
        
        <!-- VAE æ¶æ„å›¾ -->
        <div class="section">
            <h2>ğŸ“Š VAE æ¶æ„æ¦‚è§ˆ</h2>
            <div class="vae-diagram">
                <div class="component encoder">
                    <h3>ç¼–ç å™¨</h3>
                    <p>x â†’ Î¼, Ïƒ</p>
                    <small>å°†è¾“å…¥ç¼–ç ä¸ºåˆ†å¸ƒå‚æ•°</small>
                </div>
                <div class="arrow">â†’</div>
                <div class="component latent">
                    <h3>æ½œåœ¨ç©ºé—´</h3>
                    <p>z ~ N(Î¼, ÏƒÂ²)</p>
                    <small>ä»åˆ†å¸ƒä¸­é‡‡æ ·</small>
                </div>
                <div class="arrow">â†’</div>
                <div class="component decoder">
                    <h3>è§£ç å™¨</h3>
                    <p>z â†’ x'</p>
                    <small>é‡å»ºåŸå§‹è¾“å…¥</small>
                </div>
            </div>
        </div>
        
        <!-- ELBO å…¬å¼è§£é‡Š -->
        <div class="section">
            <h2>ğŸ¯ ELBO ç›®æ ‡å‡½æ•°</h2>
            <div class="formula">
                ELBO = ğ”¼[log p(x|z)] - KL(q(z|x) || p(z))
            </div>
            <div class="formula">
                â†“ å®é™…ä¼˜åŒ–ç›®æ ‡ â†“
            </div>
            <div class="formula highlight">
                Loss = é‡å»ºæŸå¤± + Î² Ã— KLæ•£åº¦
            </div>
            
            <div class="explanation">
                <strong>ä¸ºä»€ä¹ˆæ˜¯è¿™ä¸¤é¡¹ï¼Ÿ</strong>
                <br>â€¢ <strong>é‡å»ºæŸå¤±</strong>ï¼šç¡®ä¿è§£ç å™¨èƒ½å‡†ç¡®é‡å»ºè¾“å…¥
                <br>â€¢ <strong>KLæ­£åˆ™</strong>ï¼šçº¦æŸæ½œåœ¨åˆ†å¸ƒæ¥è¿‘å…ˆéªŒåˆ†å¸ƒN(0,1)
            </div>
        </div>
        
        <!-- æŸå¤±é¡¹å¯è§†åŒ– -->
        <div class="section">
            <h2>ğŸ” Î²å‚æ•°çš„ä½œç”¨æœºåˆ¶</h2>
            <div class="explanation">
                <h3>Î²çš„æ•°å­¦å«ä¹‰ï¼š</h3>
                <div class="formula">
                    â„’ = é‡å»ºæŸå¤± + <span style="color: #ffd700; font-size: 1.5em;">Î²</span> Ã— KLæ­£åˆ™é¡¹
                </div>
                <ul>
                    <li><strong>Î² = 1:</strong> æ ‡å‡†VAEï¼Œç†è®ºæœ€ä¼˜</li>
                    <li><strong>Î² > 1:</strong> Î²-VAEï¼Œæ›´å¼ºçš„æ­£åˆ™åŒ–ï¼Œæœ‰åˆ©äºè§£è€¦è¡¨å¾</li>
                    <li><strong>Î² < 1:</strong> å¼±åŒ–æ­£åˆ™ï¼Œæé«˜é‡å»ºè´¨é‡</li>
                    <li><strong>Î² = 0:</strong> é€€åŒ–ä¸ºæ™®é€šè‡ªç¼–ç å™¨</li>
                </ul>
            </div>
        </div>
        <div class="section">
            <h2>âš–ï¸ ä¸¤ä¸ªæŸå¤±é¡¹çš„ä½œç”¨</h2>
            <div class="loss-visualization">
                <div class="loss-term reconstruction">
                    <h3>ğŸ”§ é‡å»ºæŸå¤±é¡¹</h3>
                    <p><strong>ç›®æ ‡ï¼š</strong> æœ€å¤§åŒ– log p(x|z)</p>
                    <p><strong>ä½œç”¨ï¼š</strong></p>
                    <ul style="text-align: left;">
                        <li>ç¡®ä¿ç”Ÿæˆçš„å›¾åƒä¸åŸå›¾ç›¸ä¼¼</li>
                        <li>è®­ç»ƒè§£ç å™¨çš„é‡å»ºèƒ½åŠ›</li>
                        <li>ä¿è¯ä¿¡æ¯ä¸ä¸¢å¤±</li>
                    </ul>
                    <div style="background: rgba(255, 107, 107, 0.3); padding: 10px; border-radius: 5px; margin-top: 10px;">
                        <strong>å¦‚æœåªæœ‰è¿™ä¸€é¡¹ï¼š</strong><br>
                        æ¨¡å‹ä¼šè®°ä½æ¯ä¸ªæ ·æœ¬çš„ç²¾ç¡®ä½ç½®ï¼Œæ— æ³•ç”Ÿæˆæ–°æ ·æœ¬
                    </div>
                </div>
                
                <div class="loss-term kl-reg">
                    <h3>ğŸ“ KLæ­£åˆ™é¡¹</h3>
                    <p><strong>ç›®æ ‡ï¼š</strong> æœ€å°åŒ– KL(q(z|x) || N(0,1))</p>
                    <p><strong>ä½œç”¨ï¼š</strong></p>
                    <ul style="text-align: left;">
                        <li>çº¦æŸæ½œåœ¨ç©ºé—´çš„åˆ†å¸ƒå½¢çŠ¶</li>
                        <li>ç¡®ä¿æ½œåœ¨ç©ºé—´è¿ç»­å¹³æ»‘</li>
                        <li>ä½¿éšæœºé‡‡æ ·ç”Ÿæˆæœ‰æ„ä¹‰</li>
                    </ul>
                    <div style="background: rgba(72, 52, 212, 0.3); padding: 10px; border-radius: 5px; margin-top: 10px;">
                        <strong>å¦‚æœåªæœ‰è¿™ä¸€é¡¹ï¼š</strong><br>
                        æ‰€æœ‰ç‚¹éƒ½ä¼šå¡Œé™·åˆ°åŸç‚¹ï¼Œå¤±å»é‡å»ºèƒ½åŠ›
                    </div>
                </div>
            </div>
        </div>
        
        <!-- äº¤äº’å¼æ¼”ç¤º -->
        <div class="section">
            <h2>ğŸ® äº¤äº’å¼æƒé‡è°ƒèŠ‚</h2>
            <div class="interactive-demo">
                <p>è°ƒèŠ‚ Î² å‚æ•°æ¥çœ‹ä¸¤ä¸ªæŸå¤±é¡¹çš„æƒè¡¡ï¼š</p>
                <div class="slider-container">
                    <label>KLæƒé‡ Î²:</label>
                    <input type="range" id="betaSlider" class="slider" min="0" max="2" step="0.1" value="1">
                    <span id="betaValue">1.0</span>
                </div>
                
                <div class="balance-display">
                    <div style="text-align: center; font-weight: bold;">
                        é‡å»ºæŸå¤±<br>
                        <span id="reconWeight">50%</span>
                    </div>
                    <div class="balance-bar">
                        <div id="reconBar" class="balance-fill" style="background: linear-gradient(45deg, #ff6b6b, #ee5a24); width: 50%;">
                            é‡å»º
                        </div>
                        <div id="klBar" class="balance-fill" style="background: linear-gradient(45deg, #4834d4, #686de0); width: 50%; position: absolute; right: 0; top: 0;">
                            KLæ­£åˆ™
                        </div>
                    </div>
                    <div style="text-align: center; font-weight: bold;">
                        KLæ­£åˆ™<br>
                        <span id="klWeight">50%</span>
                    </div>
                </div>
                
                <div id="effectDescription" class="explanation">
                    <strong>å½“å‰æ•ˆæœï¼š</strong> é‡å»ºè´¨é‡å’Œç”Ÿæˆå¤šæ ·æ€§è¾¾åˆ°å¹³è¡¡
                </div>
            </div>
        </div>
        
        <!-- ç›´è§‰ç†è§£ -->
        <div class="section">
            <h2>ğŸ’¡ ç›´è§‰ç†è§£</h2>
            <div class="explanation">
                <h3>ğŸ¤” ä¸ºä»€ä¹ˆéœ€è¦è¿™ä¸¤é¡¹ï¼Ÿ</h3>
                <p><strong>ç±»æ¯”ï¼š</strong>æƒ³è±¡ä½ åœ¨å­¦ä¹ ç”»ç”»</p>
                <ul>
                    <li><strong>é‡å»ºæŸå¤±</strong> = ä¸´æ‘¹èƒ½åŠ›ï¼šä½ å¿…é¡»èƒ½å‡†ç¡®å¤åˆ¶çœ‹åˆ°çš„å›¾åƒ</li>
                    <li><strong>KLæ­£åˆ™</strong> = åˆ›ä½œè§„èŒƒï¼šä½ çš„åˆ›ä½œé£æ ¼è¦éµå¾ªæŸç§"æ ‡å‡†"ï¼Œä¸èƒ½å¤ªéšæ„</li>
                </ul>
                
                <h3>ğŸ¯ ELBOçš„æœ¬è´¨</h3>
                <p>ELBOæ˜¯å˜åˆ†æ¨æ–­çš„æ ¸å¿ƒï¼Œå®ƒæ˜¯çœŸå®å¯¹æ•°ä¼¼ç„¶çš„<strong>ä¸‹ç•Œ</strong>ï¼š</p>
                <div class="formula">
                    log p(x) â‰¥ ELBO = ğ”¼[log p(x|z)] - KL(q(z|x) || p(z))
                </div>
                <p>æœ€å¤§åŒ–ELBO = æœ€å¤§åŒ–é‡å»ºæ¦‚ç‡ + ä¿æŒåˆ†å¸ƒè§„æ•´</p>
            </div>
        </div>
        
        <!-- å¸¸è§é—®é¢˜ -->
        <div class="section">
            <h2>â“ å¸¸è§ç–‘é—®è§£ç­”</h2>
            <div class="explanation">
                <h3>Q: ä¸ºä»€ä¹ˆä¸ç›´æ¥æœ€å¤§åŒ– log p(x)ï¼Ÿ</h3>
                <p>A: å› ä¸º p(x) = âˆ« p(x|z)p(z)dz çš„ç§¯åˆ†éš¾ä»¥è®¡ç®—ï¼Œæ‰€ä»¥ç”¨å˜åˆ†æ¨æ–­æ‰¾ä¸‹ç•Œ</p>
                
                <h3>Q: Î²-VAE ä¸­çš„ Î² æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ</h3>
                <p>A: Î² æ§åˆ¶è§£ç è´¨é‡vsæ½œåœ¨ç©ºé—´è§„æ•´æ€§çš„æƒè¡¡ã€‚Î²>1æ—¶æ›´é‡è§†è§£è€¦ï¼ŒÎ²<1æ—¶æ›´é‡è§†é‡å»º</p>
                
                <h3>Q: KLæ•£åº¦ä¸º0æ—¶ä¼šæ€æ ·ï¼Ÿ</h3>
                <p>A: æ‰€æœ‰æ½œåœ¨å‘é‡éƒ½å˜æˆæ ‡å‡†æ­£æ€åˆ†å¸ƒï¼Œå¤±å»äº†ç¼–ç è¾“å…¥çš„èƒ½åŠ›</p>
            </div>
        </div>
    </div>
    
    <script>
        const betaSlider = document.getElementById('betaSlider');
        const betaValue = document.getElementById('betaValue');
        const reconWeight = document.getElementById('reconWeight');
        const klWeight = document.getElementById('klWeight');
        const reconBar = document.getElementById('reconBar');
        const klBar = document.getElementById('klBar');
        const effectDescription = document.getElementById('effectDescription');
        
        function updateBalance() {
            const beta = parseFloat(betaSlider.value);
            betaValue.textContent = beta.toFixed(1);
            
            // è®¡ç®—ç›¸å¯¹æƒé‡
            const total = 1 + beta;
            const reconPercent = (1 / total * 100);
            const klPercent = (beta / total * 100);
            
            reconWeight.textContent = `${reconPercent.toFixed(0)}%`;
            klWeight.textContent = `${klPercent.toFixed(0)}%`;
            
            reconBar.style.width = `${reconPercent}%`;
            klBar.style.width = `${klPercent}%`;
            
            // æ›´æ–°æ•ˆæœæè¿°
            let description = '';
            if (beta < 0.3) {
                description = '<strong>Î² < 0.3:</strong> é‡å»ºè´¨é‡ä¼˜å…ˆï¼Œå¯èƒ½å‡ºç°è¿‡æ‹Ÿåˆï¼Œæ½œåœ¨ç©ºé—´æ··ä¹±';
            } else if (beta < 0.8) {
                description = '<strong>0.3 â‰¤ Î² < 0.8:</strong> åé‡é‡å»ºï¼Œé€‚åˆé«˜è´¨é‡å›¾åƒç”Ÿæˆä»»åŠ¡';
            } else if (beta <= 1.2) {
                description = '<strong>0.8 â‰¤ Î² â‰¤ 1.2:</strong> å¹³è¡¡çŠ¶æ€ï¼Œæ ‡å‡†VAEé…ç½®ï¼Œé‡å»ºå’Œç”Ÿæˆå…¼é¡¾';
            } else if (beta <= 1.8) {
                description = '<strong>1.2 < Î² â‰¤ 1.8:</strong> åé‡æ­£åˆ™åŒ–ï¼Œæ½œåœ¨ç©ºé—´æ›´è§„æ•´ï¼Œæœ‰åˆ©äºæ’å€¼å’Œè§£è€¦';
            } else {
                description = '<strong>Î² > 1.8:</strong> å¼ºæ­£åˆ™åŒ–ï¼Œå¯èƒ½ç‰ºç‰²é‡å»ºè´¨é‡ï¼Œé€‚åˆè§£è€¦è¡¨å¾å­¦ä¹ ';
            }
            
            effectDescription.innerHTML = description;
        }
        
        betaSlider.addEventListener('input', updateBalance);
        
        // æ·»åŠ ä¸€äº›åŠ¨æ€æ•ˆæœ
        document.querySelectorAll('.component').forEach((comp, index) => {
            comp.style.animationDelay = `${index * 0.2}s`;
        });
    </script>
</body>
</html>